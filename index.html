<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV TV Player</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> <!-- Librer칤a HLS.js -->
    <style>
        body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://e1.pxfuel.com/desktop-wallpaper/21/354/desktop-wallpaper-5-80s-movie-80s-bands.jpg'); /* URL de la imagen de fondo */
    background-size: cover; /* Para que la imagen cubra todo el fondo */
    background-position: center; /* Centrar la imagen */
    background-repeat: no-repeat; /* No repetir la imagen */
    font-family: Arial, sans-serif;
    color: #fff; /* Texto claro */
}

        #videoPlayerContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 40vh; /* El reproductor ocupar치 el 40% de la pantalla */
            background-color: #000;
            z-index: 10;
        }

        #videoPlayer {
            width: 100%;
            height: 100%;
            display: none; /* Ocultamos el video mientras se carga */
        }

        #loadingScreen {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #fff;
            font-size: 3em;
            font-weight: bold;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100; /* Por encima del reproductor */
        }

        #flixyText {
            color: red;
        }

        #tvText {
            color: white;
        }

        #currentChannelInfo {
    position: fixed;
    top: 40vh;
    left: 0;
    width: 98%;
    min-height: 40px; /* Establece una altura m칤nima fija */
    background-color: #333; /* Fondo gris oscuro */
    color: #fff; /* Texto en blanco para contraste */
    padding: 5px; /* Reducir el padding para hacer la secci칩n m치s delgada */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
    border-radius: 0 0 15px 15px; /* Esquinas redondeadas solo en la parte inferior */
    border-bottom: 2px solid red; /* L칤nea roja delgada solo en la parte inferior */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.8); /* Sombra difusa en la parte inferior */
}


#currentChannelInfo img {
    width: 40px;
    height: auto; /* Mantener proporci칩n del logo */
    margin-right: 10px; /* Reducir el margen derecho */
}

#currentChannelInfo span {
    font-size: 1em; /* Tama침o de fuente ligeramente reducido */
    color: #fff; /* Texto en blanco para contraste */
}

        #channelList {
    position: fixed;
    padding: 50px;
    overflow-y: auto;
    height: calc(60vh - 100px);
    bottom: 0; /* Fija la lista en la parte inferior de la pantalla */
    left: 0;
    right: 0;
    z-index: 10;
    background-color: rgba(13, 13, 1, 0.6); /* Fondo semitransparente con efecto vidrio */
    backdrop-filter: blur(10px); /* Desenfoque del fondo para el efecto vidrio */
    border-radius: 15px 15px 0 0; /* Bordes redondeados solo en la parte superior */
    box-shadow: 0 -4px 6px rgba(0, 0, 0, 0.5); /* Sombra superior para darle m치s profundidad */
}

h2 {
    text-align: center;
    margin: 0;
    padding-top: 10px;
}

        h2 {
            text-align: center;
            margin-top: 0;
            padding-top: 20px;
        }

        .category-button {
            display: block;
            margin: 10px 0;
            padding: 15px;
            background-color: #4a4a4a; /* Fondo ligeramente m치s oscuro */
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 1.2em; /* Aumentar tama침o de la fuente */
            width: 100%;
            text-align: left;
            border-radius: 8px; /* Bordes redondeados */
            transition: all 0.3s ease; /* Transici칩n suave */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Sombra suave */
        }

        .category-button:hover {
            background-color: #333; /* Color m치s claro al hacer hover */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2); /* Sombra m치s profunda en hover */
        }

        .channel-list-group {
            display: none; /* Ocultar inicialmente las listas de canales */
            padding-left: 20px; /* Sangr칤a para la lista de canales */
            margin: 0; /* Sin margen para las listas */
            list-style-type: none; /* Sin vi침etas */
        }

        .channel-list-group.active {
            display: block; /* Mostrar cuando est치 activa */
        }

        li {
    display: flex;
    align-items: center; /* Alinear contenido verticalmente */
    padding: 10px;
    cursor: pointer;
    border-bottom: 1px solid #333; /* L칤nea separadora */

}

        li img {
            width: 50px;
            height: auto;
            margin-right: 15px;
            border-radius: 4px; /* Logos tambi칠n con bordes redondeados */
        }

        li span {
            text-transform: uppercase;
            flex-grow: 1;
        }

        .channel-number {
            margin-right: 10px; /* Espaciado entre n칰mero y logo */
            font-weight: bold; /* Hacer el n칰mero m치s destacado */
        }
    </style>
</head>
<body>

    <!-- Contenedor del reproductor de video -->
    <div id="videoPlayerContainer">
        <!-- Pantalla de carga personalizada -->
        <div id="loadingScreen">
            <span id="flixyText">FLIXY</span><span id="tvText"> tv</span>
        </div>
        
        <!-- Reproductor de video -->
        <video id="videoPlayer" controls autoplay>
            <source id="videoSource" src="" type="application/x-mpegURL">
            Tu navegador no soporta la reproducci칩n de video.
        </video>
    </div>

    <!-- Secci칩n que muestra el canal actual -->
    <div id="currentChannelInfo">
        <img id="currentChannelLogo" src="https://www.emojiall.com/en/header-svg/%F0%9F%93%BA%EF%B8%8E.svg" alt="Logo del canal">
        <span id="currentChannelText">Selecciona un canal</span>
    </div>

    <!-- Lista de canales por categor칤as -->
    <div id="channelList">
        <h2>游녤 CATEGOR칈AS 游녣</h2>
        <div id="categoryButtons"></div>
    </div>

    <script>
        // Almacenar las categor칤as de canales
        const categories = {};

        // Funci칩n para cargar y procesar la lista M3U
        async function loadM3UList(url) {
            try {
                const response = await fetch(url);
                const m3uText = await response.text();
                processM3U(m3uText);
            } catch (error) {
                console.error("Error al cargar la lista M3U:", error);
            }
        }

        // Funci칩n para procesar el contenido M3U
        function processM3U(m3uText) {
            const lines = m3uText.split("\n");
            const categoryButtonsContainer = document.getElementById("categoryButtons");

            let currentChannel = {};
            let currentCategory = "Sin Categor칤a"; // Por defecto si no tiene categor칤a
            let channelCount = 1; // Contador para los n칰meros de los canales

            lines.forEach(line => {
                line = line.trim();

                if (line.startsWith("#EXTINF")) {
                    const categoryMatch = line.match(/group-title="(.*?)"/);
                    const logoMatch = line.match(/tvg-logo="(.*?)"/); // Extraer logo
                    const channelInfo = line.split(",")[1];
                    currentCategory = categoryMatch ? categoryMatch[1] : "Sin Categor칤a";
                    currentChannel = { name: channelInfo, logo: logoMatch ? logoMatch[1] : 'https://via.placeholder.com/50' }; // Usa logo extra칤do o un placeholder

                    // Crear grupo de categor칤as si no existe
                    if (!categories[currentCategory]) {
                        categories[currentCategory] = [];
                        createCategoryButton(currentCategory);
                    }
                } else if (line && !line.startsWith("#")) {
                    currentChannel.url = line;
                    categories[currentCategory].push(currentChannel);
                    currentChannel = {};
                }
            });

            // Crear lista de canales para cada categor칤a
            for (const category in categories) {
                createChannelList(category, categories[category]);
            }
        }

        // Funci칩n para crear el bot칩n de categor칤a
        function createCategoryButton(category) {
            const categoryButtonsContainer = document.getElementById("categoryButtons");
            const button = document.createElement("button");
            button.textContent = category;
            button.classList.add("category-button");

            // Crear grupo de lista de canales correspondiente a la categor칤a
            const categoryGroup = document.createElement("ul");
            categoryGroup.id = `category-${category}`;
            categoryGroup.classList.add("channel-list-group");

            // Mostrar los canales de la categor칤a al hacer clic
            button.addEventListener("click", () => {
                const isActive = categoryGroup.classList.toggle('active');
                button.style.backgroundColor = isActive ? '#666' : '#444'; // Cambia el color de fondo del bot칩n
                categoryGroup.style.display = isActive ? 'block' : 'none'; // Mostrar u ocultar la lista de canales
            });

            categoryButtonsContainer.appendChild(button);
            categoryButtonsContainer.appendChild(categoryGroup); // Mueve la lista de canales debajo del bot칩n
        }

        // Funci칩n para crear la lista de canales
        function createChannelList(category, channels) {
            const categoryGroup = document.getElementById(`category-${category}`);

            channels.forEach((channel, index) => {
                const listItem = document.createElement("li");

                const channelLogo = document.createElement("img");
                channelLogo.src = channel.logo; // Usar la URL del logo extra칤do
                channelLogo.alt = `Logo de ${channel.name}`;

                const channelNumber = document.createElement("span");
                channelNumber.className = "channel-number";
                channelNumber.textContent = index + 1; // Numeraci칩n

                const channelName = document.createElement("span");
                channelName.textContent = channel.name;

                listItem.appendChild(channelLogo);
                listItem.appendChild(channelNumber);
                listItem.appendChild(channelName);

                listItem.addEventListener("click", () => selectChannel(channel));

                categoryGroup.appendChild(listItem);
            });
        }

        // Funci칩n para seleccionar un canal y cargar el video
        function selectChannel(channel) {
            const videoPlayer = document.getElementById("videoPlayer");
            const videoSource = document.getElementById("videoSource");
            const loadingScreen = document.getElementById("loadingScreen");
            const currentChannelText = document.getElementById("currentChannelText");
            const currentChannelLogo = document.getElementById("currentChannelLogo");

            videoSource.src = channel.url;
            videoPlayer.load();
            videoPlayer.style.display = "none"; // Ocultar el video mientras se carga
            loadingScreen.style.display = "flex"; // Mostrar la pantalla de carga
            currentChannelText.textContent = channel.name; // Actualizar el nombre del canal
            currentChannelLogo.src = channel.logo; // Actualizar el logo del canal

            videoPlayer.onloadedmetadata = () => {
                loadingScreen.style.display = "none"; // Ocultar la pantalla de carga
                videoPlayer.style.display = "block"; // Mostrar el video
                videoPlayer.play();
            };
        }

        // Cargar la lista M3U al cargar la p치gina
        window.onload = () => {
            loadM3UList('https://raw.githubusercontent.com/Iptv-cnls/Listas/refs/heads/main/lista3.m3u');
        };
    </script>
</body>
</html> 
